---
title: ã€ç®—æ³•ã€‘å¿«é€Ÿæ’åºï¼Œå½’å¹¶æ’åºï¼Œä¸¤ç§äºŒåˆ†çš„æ¨¡æ¿å¹²è´§è®²è§£ï¼Œé™„å¸¦è¾¹ç•Œé—®é¢˜çš„åˆ†æã€‚
cover: https://imgbed.link/file/19737
tags:
  - ç®—æ³•
  - c++
  - æ’åº
abbrlink: ac898649
swiper_index: 5
categories: 
- ç®—æ³• 
date: 2023-03-07 22:32:08

---
>å‰è¨€ï¼šæœ¬ç¯‡å†…å®¹ä¼šæ€»ç»“å¿«é€Ÿæ’åºä¸å½’å¹¶æ’åºä¸¤ç§å¸¸è§çš„æ’åºä»¥åŠæ•´æ•°äºŒåˆ†ï¼Œæµ®ç‚¹æ•°äºŒåˆ†ï¼Œå¹¶ç»™å‡ºç›¸åº”çš„æ¨¡æ¿ä»£ç ä¸ç¤ºä¾‹é¢˜ç›®ã€‚åœ¨ä»£ç çš„è®²è§£è¿‡ç¨‹ä¸­ä¹Ÿä¼šé™„å¸¦è®²è§£è®©äººå¤´ç–¼çš„è¾¹ç•Œé—®é¢˜ï¼Œåˆ°åº•å¦‚ä½•åˆ’åˆ†åŒºé—´ï¼Œåˆ’åˆ†ååˆè¯¥å¦‚ä½•è®¾å®šå‚æ•°ã€‚

# ğŸ“£å¿«é€Ÿæ’åº
 
##  ğŸ¥— åŸºæœ¬æ€æƒ³
å¿«é€Ÿæ’åºçš„ä¸­å¿ƒæ€æƒ³å°±æ˜¯`åˆ†æ²»ç®—æ³•`ã€‚å…¶æ“ä½œè¿‡ç¨‹å°±æ˜¯åœ¨åŒºé—´ä¸Šé€‰å®šä¸€ä¸ªå€¼ï¼Œç„¶åæ’åºæ•´ä¸ªæ•°ç»„ï¼Œä½¿å¾—`å€¼å·¦è¾¹çš„éƒ½å°äºå®ƒï¼Œå³è¾¹çš„éƒ½å¤§äºå®ƒ`ï¼Œç„¶åæ•´ä¸ªæ•°ç»„å°±è¢«åˆ†æˆäº†ä¸¤æ®µï¼Œåˆ†æ²»çš„æ€æƒ³å°±ä½“ç°åœ¨è¿™é‡Œï¼Œåˆ†åˆ«åœ¨å·¦å³ä¸¤ä¸ªæ•°ç»„é‡Œå–ä¸€ä¸ªå€¼ï¼Œåˆç»§ç»­ä¸Šè¿°çš„æ“ä½œï¼Œç›´åˆ°åªå‰©ä¸€ä¸ªæ•°ã€‚
æ¯”å¦‚ç»™å‡ºä¸€ä¸ªæ•°ç»„
{1,3,6,4,7,8,9,3,4}
 æˆ‘ä»¬ä»¥ï¼ˆå·¦è¾¹ç•Œ+å³è¾¹ç•Œ>>1ï¼‰ä¸ºæ¯æ¬¡ç¡®å®šçš„å€¼çš„ä¸‹æ ‡ï¼Œé‚£ä¹ˆå–åˆ°çš„ç¬¬ä¸€ä¸ªå€¼å°±æ˜¯7ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œçš„æ“ä½œå°±æ˜¯å°†æ¯”7å¤§çš„æ’åˆ°7å³è¾¹ï¼Œæ¯”7å°çš„æ’åˆ°7å·¦è¾¹ã€‚â€˜
 å¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœ
 {1,3,6,4,3,4}{7}{8,9}
 æ­¤æ—¶7å°±è¢«æ”¾åˆ°äº†æœ€åˆé€‚çš„ä½ç½®ï¼Œåªéœ€è¦åˆ†åˆ«æ’åºå·¦å³ä¸¤ä¸ªæ•°ç»„å³å¯ã€‚
 ä¸Šè¿°çš„ä¾¿æ˜¯å¿«æ’çš„åŸºç¡€æ€æƒ³ã€‚æœ€åˆçš„å¿«æ’æ˜¯ç”±hoareæå‡ºçš„ï¼Œç»ç”±åäººçš„ä¸æ–­ä¼˜åŒ–æœ‰äº†å¤šç§çš„ç‰ˆæœ¬ã€‚
 <img src='https://imgbed.link/file/21637'>
 ##  ğŸŒhoareç‰ˆå¿«æ’
 åœ¨å¼€ç¯‡æ—¶è°ˆåˆ°å…¶ä¸­å¿ƒæ€æƒ³æ˜¯åˆ†æ²»ï¼Œéœ€è¦æ‰¾åˆ°åŒºé—´ä¸­çš„ä¸€ä¸ªå€¼æ¥ä½œä¸ºåˆ†éš”ä¸¤è¾¹çš„ç•Œé™ï¼Œå¦‚ä½•å»å¯»æ‰¾è¿™ä¸ªå€¼å‘¢ï¼Ÿ
 æœ‰ä¸€ç§æ˜æ˜¾å¯ä»¥é™ä½å¤æ‚åº¦çš„æ–¹æ³•å«`ä¸‰æ•°å–ä¸­`ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸‰ä¸ªæ•°é‡Œå–å‡ºä¸€ä¸ª`å¤„åœ¨ä¸­é—´çš„å€¼`ï¼Œç”¨æ­¤æ•°æ¥ä½œä¸ºåˆ’åˆ†çš„å€¼ã€‚è¿™ç§ç®—æ³•ç›¸è¾ƒäºç›´æ¥å–`ä¸­é—´`ï¼Œæˆ–è€…`å·¦å³ä¸¤è¾¹`ä¼šæœ‰æ˜æ˜¾çš„æå‡ã€‚

```c
int GetMidNumi(int* a, int left, int right)
{
	int mid = (left + right) / 2;
	if (a[left] < a[mid])
	{
		if (a[mid] < a[right])
		{
			return mid;
		}
		else if (a[left] > a[right])
		{
			return left;
		}
		else
		{
			return right;
		}
	}
	else // a[left] > a[mid]
	{
		if (a[mid] > a[right])
		{
			return mid;
		}
		else if (a[left] < a[right])
		{
			return left;
		}
		else
		{
			return right;
		}
	}
}

```
æ‰¾åˆ°äº†åŒºåˆ†ç•Œé™çš„å€¼ï¼Œå°±å¯ä»¥é€æ­¥çš„è¿›è¡Œåˆ†æ²»äº†ã€‚
```c
int quickSort(int* a, int left, int right) {
	if (left >= right)
			return;
		
	int begin = left, end = right;
	// ä¸‰æ•°å–ä¸­
	int midi = GetMidNumi(a, left, right);
	if (midi != left)
		Swap(&a[midi], &a[left]);

	int keyi = left;
	while (left < right)
	{
		while (left < right && a[right] >= a[keyi])
			--right;
		while (left < right && a[left] <= a[keyi])
			++left;

		Swap(&a[left], &a[right]);
	}

	Swap(&a[keyi], &a[left]);
	QuickSort1(a, begin, keyi - 1);
	QuickSort1(a, keyi+1, end);
}

```
 ä¸Šè¿°ä»£ç è¿˜æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„ç‚¹ï¼Œé‚£å°±æ˜¯`å½“å·¦è¾¹çš„å€¼åškeyæ—¶ï¼Œå³è¾¹å…ˆèµ°ï¼Œå¯ä»¥ä¿è¯ç›¸é‡ä½ç½®çš„å€¼æ¯”keyè¦å°`,è¿™ä¸€ç‚¹å¯ä»¥è‡ªè¡Œä½è¯.
 åŒç†,`å½“å³è¾¹çš„å€¼åškeyæ—¶ï¼Œå·¦è¾¹å…ˆèµ°ï¼Œå¯ä»¥ä¿è¯ç›¸é‡ä½ç½®çš„å€¼æ¯”keyè¦å¤§`.
 ä¸Šè¿°çš„æ–¹æ³•æ˜¯hoareçš„åŸºç¡€ç‰ˆæœ¬,ç»è¿‡äº†ä¸€äº›å°ä¼˜åŒ–æ‰€å¾—åˆ°çš„,å…¶ä¸­å¾ˆå¤šåœ°æ–¹éƒ½è•´å«ç€å‘,åªè¦ç¨å¾®å†™é”™äº†ä¸€ç‚¹éƒ½ä¼šå¼•å‘bug.
 ## ğŸŒ¯æ”¹è‰¯çš„ç®—æ³•æ¨¡æ¿
 æˆ‘ä¸ªäººæ›´æ¨èé‡‡ç”¨å¦‚ä¸‹çš„ç®—æ³•æ¨¡æ¿ï¼Œç›´æ¥å–ä¸­ï¼Œæ˜¾å¾—æ›´åŠ ç®€æ´,ä¸”æ›´æ˜“è®°ä½,å¤šå†™å‡ éå³å¯ã€‚
 ```c
 void quick_sort(int* arr, int l, int r) {
  if(l>=r)
  return;
  int i=l-1;
  int j=r+1;
  int x=arr[(l+r>>1)];
  while(i<j){
      do{i++;}while(arr[i]<x);
      do{j--;}while(arr[j]>x);
      if(i<j)
      {
          int tmp=arr[i];
          arr[i]=arr[j];
          arr[j]=tmp;
      }
      
}
quick_sort(arr,l,j);
      quick_sort(arr,j+1,r);
}
```

å‚æ•°éƒ¨åˆ†çš„arrä»£è¡¨ä¼ å…¥çš„æ•°ç»„ï¼Œlä¸råˆ™æ˜¯æ•°ç»„çš„ä¸¤ä¸ªè¾¹ç•Œä¸‹æ ‡ã€‚
åœ¨å¿«é€Ÿæ’åºçš„è¿‡ç¨‹ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ä¹Ÿå°±æ˜¯æ’åºçš„éƒ¨åˆ†ã€‚åœ¨è¿™é‡Œæˆ‘é‡‡å–çš„æ˜¯å·¦å³æŒ‡é’ˆçš„æ–¹å¼ã€‚
å¦‚ä¸Šï¼Œæˆ‘å®šä¹‰äº†ä¸¤ä¸ªæŒ‡é’ˆiä¸jï¼Œå½“iæ‰€æŒ‡å‘çš„é‚£ä¸ªæ•°æ¯”é€‰å–å€¼è¦å¤§æ—¶ï¼Œåˆ™åœä¸‹æ¥ï¼Œè¦å°ä¹Ÿå°±æ˜¯ç¬¦åˆè¦æ±‚å°±ä¸€ç›´å¾€åèµ°ï¼Œjåˆ™æ˜¯åŒç†ï¼Œä¸¤ä¸ªæŒ‡é’ˆçš„æœ¬è´¨éƒ½æ˜¯åœ¨`ç­›é€‰ä¸ç¬¦åˆè¦æ±‚çš„å€¼`ã€‚
ä½†ä¸Šè¿°çš„å†™æ³•åœ¨è¿›è¡Œç­›é€‰æ—¶å¯èƒ½æŸä¸€è¶Ÿæ— æ³•å®ç°è®©é€‰å–å€¼çš„ä¸¤è¾¹éƒ½å®Œå…¨ç¬¦åˆè¦æ±‚ï¼Œä½†å³ä¾¿å¦‚æ­¤åœ¨æ¥ä¸‹æ¥çš„è¶Ÿæ•°ä¸­ä¼šè¿›è¡Œé€æ­¥çš„çº æ­£ã€‚ä¸Šè¿°æ¨¡æ¿æ˜¯æ–¹ä¾¿è®°å¿†çš„ä¸€ä¸ª`æœ€ä¼˜è§£`ã€‚
å½“ç„¶ï¼Œå¦‚æœå¿˜è®°äº†å¦‚ä½•è°ƒæ•´ï¼Œä¹Ÿå¯ä½¿ç”¨å¼€è¾Ÿæ–°æ•°ç»„çš„æ–¹å¼ï¼Œæˆ–è€…`æŒ–å‘æ³•`ã€‚
<img src='https://imgbed.link/file/21640'>
æ­¤å¤„å°±ä¸å†å±•ç¤ºæŒ–å‘çš„ä»£ç ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªè¡Œå†™æˆ–è€…ç™¾åº¦ã€‚
åŒæ—¶ï¼Œå› ä¸ºä½¿ç”¨çš„æ˜¯do whileç»“æ„ï¼Œæ‰€ä»¥å®šä¹‰iä¸jæ—¶é€‰æ‹©`å„è‡ªå¾€ä¸¤è¾¹é ä¸€ä½`ã€‚
## ğŸ£å…³äºè¾¹ç•Œé—®é¢˜çš„ä¸€äº›åˆ†æ

åœ¨ä½¿ç”¨å¿«é€Ÿæ’åºæ—¶ï¼Œéœ€è¦é¢å¤–çš„æ³¨æ„è¾¹ç•Œçš„åˆ’åˆ†é—®é¢˜ï¼Œå…¶æ ¸å¿ƒåœ¨äºæ˜¯å¦ä¼š`æ­»å¾ªç¯`ã€‚
åˆ¤æ–­æ˜¯å¦æ­»å¾ªç¯ä¹Ÿååˆ†ç®€å•ï¼Œåœ¨ä¸æ–­çš„é€’å½’ä¸­ï¼Œlä¸rä¸æ–­å˜åŒ–ï¼Œè‹¥åœ¨å‚æ•°ä¸ºï¼ˆarrï¼Œlï¼Œrï¼‰çš„å‡½æ•°é€’å½’ä¸­å†æ¬¡å‡ºç°äº†ï¼ˆarrï¼Œlï¼Œrï¼‰ï¼Œå¾ˆæ˜æ˜¾ï¼Œè¿™æ ·å°±ä¼šé€ æˆæ­»å¾ªç¯ã€‚

 å…ˆæ¥çœ‹è¾¹ç•Œæ˜¯å¦‚ä½•ç¡®å®šçš„ã€‚å¿«é€Ÿæ’åºçš„æ–¹æ³•æ ¸å¿ƒåœ¨äºåˆ†æ²»ï¼Œä¹Ÿå°±æ˜¯å°†åºåˆ—åˆ’åˆ†ä¸º`å·¦éƒ¨åˆ†å°äºç­‰äºxï¼Œå³éƒ¨åˆ†å¤§äºç­‰äºx`ï¼Œé‚£ä¹ˆå¯¹äºiè€Œè¨€ï¼Œiå·¦è¾¹çš„æ•°éƒ½æ˜¯å¿…å®šå°äºç­‰äºxï¼Œä¸”jå³è¾¹çš„æ•°å¿…å®šå¤§äºç­‰äºxï¼Œé‚£ä¹ˆå°±å¯åˆ’åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š
 ```c
quick_sort(l,i-1) ,quick_sort(i,r)
quick_sort(l,j) ,quick_sort(j+1,r)
 ```
 *ä¹Ÿå°±æ˜¯arr[i]ä¸èƒ½ä¿è¯å°äºç­‰äºxï¼Œä½†i-1å¯ä»¥ï¼Œarr[j]ä¸å¯ä»¥ä¿è¯å¤§äºç­‰äºxï¼Œä½†j+1å¯ä»¥ã€‚*
æ­¤æ—¶å¯¹äºxçš„é€‰æ‹©å°±ä¼šé€ æˆæŸäº›æ­»å¾ªç¯ã€‚
>å½“x=arr[l]
ä¾‹å¦‚æ•°ç»„é‡Œåªæœ‰1ï¼Œ2ï¼Œåœ¨ä¸€è½®å¾ªç¯ä¹‹åä¼šä½¿å¾—`i=l`ï¼Œæ­¤æ—¶è¿›è¡Œé€’å½’ä¼šå¾—åˆ°sort(l,i-1),sort(i,r)ï¼Œä½ ä¼šå‘ç°sort(i,r)æ˜¯ç­‰ä»·äºsort(l,r)çš„ï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šå‘ç”Ÿæ­»å¾ªç¯ã€‚

>å½“x=arr[r]
ä¾‹å¦‚æ•°ç»„é‡Œåªæœ‰1ï¼Œ2ï¼Œåœ¨ä¸€è½®å¾ªç¯ä¹‹åä¼šä½¿å¾—`j=r`ï¼Œæ­¤æ—¶è¿›è¡Œé€’å½’ä¼šå¾—åˆ°sort(l,j),sort(j+1,r)ï¼Œä½ ä¼šå‘ç°sort(l,j)æ˜¯ç­‰ä»·äºsort(l,r)çš„ï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šå‘ç”Ÿæ­»å¾ªç¯ã€‚

è¿˜å¯ä»¥è€ƒè™‘ä¸€ä¸‹x=arr[l+r>>1]çš„æƒ…å†µï¼Œæ­¤æ—¶çš„arr`æ˜¯å‘ä¸‹å–æ•´çš„`ï¼Œé‚£ä¹ˆè¿˜æ˜¯ä½¿ç”¨1ï¼Œ2çš„ä¾‹å­ï¼Œå…¶ç­‰ä»·äºå½“x=arr[l]è¿™ç§æƒ…å†µäº†ã€‚

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ€»ç»“è¿™æ ·çš„è§„å¾‹ï¼š
>å¦‚æœx=arr[l] or x=arr[l+r>>1]ï¼Œæ­¤æ—¶åªå¯ä»¥ä½¿ç”¨sort(l,j),sort(j+1,r)
å¦‚æœx=arr[r],æ­¤æ—¶å°±åªå¯ä»¥ä½¿ç”¨sort(l,i-1),sort(i,r)

ä¸€å®šè¦ç†Ÿè®°ä¸Šé¢çš„è§„å¾‹ã€‚

## ğŸ°éé€’å½’å®ç°å¿«æ’
è¿˜æœ‰ä¸€ç§å¿«é€Ÿæ’åº,æ˜¯`éé€’å½’`çš„å½¢å¼æ¥å®ç°çš„.

# ğŸ””å½’å¹¶æ’åº
å½’å¹¶æ’åºçš„æ€æƒ³ä¹Ÿæ˜¯`åˆ†æ²»`ã€‚
ç¬¬ä¸€æ­¥ä»ç„¶æ˜¯å–ä¸€ä¸ªåˆ†ç•Œç‚¹ï¼Œç¬¬äºŒæ­¥å°±æ˜¯å°†è¿™ä¸ªæ•°ç»„åˆ†ä¸ºä¸¤ä¸ªæ•°ç»„ï¼Œç¬¬ä¸‰æ­¥ï¼Œå¯¹ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«è¿›è¡Œæ’åºã€‚
å½“ç„¶ï¼Œå½“æ•°ç»„åªæœ‰ä¸€ä¸ªæ•°å°±ç›´æ¥è¿”å›å³å¯ï¼Œå› ä¸ºæ­¤æ—¶ä¸éœ€è¦è¿›è¡Œæ’åºã€‚
å½’å¹¶ï¼Œå­—é¢æ„æ€ç†è§£å°±æ˜¯`åˆäºŒä¸ºä¸€`ï¼Œä¸æ–­çš„é€šè¿‡é€’å½’ï¼Œå°†`å°æ•°ç»„å˜æˆæœ‰åºæ•°ç»„`ï¼Œå†ä¸æ–­é€šè¿‡é€’å½’è¿”å›ï¼Œå°†æœ‰åºæ•°ç»„çš„é•¿åº¦è¶Šæ‹¼æ¥è¶Šå¤§ï¼Œç›´åˆ°æ‹¼å®Œæ•´ä¸ªæ•°ç»„ã€‚

å…¶æ¨¡æ¿å¦‚ä¸‹ï¼š

```c
void mergesort(int* arr,int l,int r){
    if(l>=r)
    return;
    int mid=(l+r>>1);
    mergesort(arr,l,mid);
    mergesort(arr,mid+1,r);
    int tmp[100000];
    int i=l;
    int j=mid+1;
    int k=0;
    while(i<=mid&&j<=r){
        if(arr[i]>arr[j]){
            tmp[k++]=arr[j++];
            
        }else{
            tmp[k++]=arr[i++];
        }
    }
    while(i<=mid) tmp[k++]=arr[i++];
    while(j<=r) tmp[k++]=arr[j++];
    for(int i=l,k=0;i<=r;i++,k++){
        arr[i]=tmp[k];
    }
}
```
åœ¨æ’åºçš„è¿‡ç¨‹ä¸­ï¼Œè¿™é‡Œä½¿ç”¨çš„æ–¹æ³•æ˜¯`å¼€è¾Ÿæ–°æ•°ç»„`ï¼Œåˆ†åˆ«ç”¨`ä¸¤ä¸ªæŒ‡é’ˆ`æŒ‡å‘è¦æ‹¼æ¥çš„å°æ•°ç»„ï¼Œä¸æ–­è¿›è¡Œæ¯”è¾ƒï¼Œå–å‡ºæ›´å°çš„æ”¾åˆ°æ–°æ•°ç»„ä¸­ã€‚
å½“ç„¶ï¼Œåˆ«å¿˜äº†å°†æ’åºå¥½çš„æ–°æ•°ç»„å†ä¾æ¬¡æ”¾å›åŸæ•°ç»„ä¸­å»ã€‚
å½’å¹¶æ’åºä¹Ÿæ˜¯è¦è€ƒè™‘åˆ°`è¾¹ç•Œé—®é¢˜`çš„ã€‚
å’Œå¿«é€Ÿæ’åºæ˜¯ä¸€ä¸ªé“ç†ï¼Œå› ä¸ºmidçš„å€¼æ˜¯`å‘ä¸‹å–æ•´`çš„ï¼Œæ‰€ä»¥`midå¯èƒ½ä¼šå–åˆ°l`ï¼ˆå¯ä»¥å†æƒ³æƒ³åªæœ‰ä¸¤ä¸ªæ•°çš„æ•°ç»„çš„ä¾‹å­ï¼‰,é‚£ä¹ˆå¦‚æœåˆ’åˆ†ä¸ºï¼ˆlï¼Œmid-1ï¼‰ä¸ï¼ˆmidï¼Œrï¼‰ï¼Œä¹Ÿä¼šå‡ºç°ï¼ˆmidï¼Œrï¼‰ç­‰ä»·äºï¼ˆlï¼Œrï¼‰çš„æ­»å¾ªç¯äº†ã€‚
ä½†æ˜¯å¦‚æœä½¿ç”¨`mid`ä½œä¸ºåˆ†å‰²çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯ï¼ˆlï¼Œmidï¼‰ä¸ï¼ˆmid+1ï¼Œrï¼‰ï¼Œå› ä¸ºmidå‘ä¸‹å–æ•´ï¼Œæ‰€ä»¥å†æ€æ ·`éƒ½ä¸ä¼šå–åˆ°r`ï¼Œå¦‚æœæ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªæ•°ä¹Ÿæ˜¯ç›´æ¥è¿”å›ï¼Œä¸ä¼šé€ æˆæ­»å¾ªç¯ã€‚

è¾¹ç•Œåˆ’åˆ†çš„é—®é¢˜å¤§å¤šéƒ½å¯ä»¥è¿™æ ·æ€è€ƒï¼Œå¯ä»¥è§„é¿æ‰å¾ˆå¤šçš„é—®é¢˜ã€‚

##  ğŸ¤ åˆ©ç”¨å½’å¹¶æ’åºæ±‚é€†åºå¯¹çš„æ•°é‡
è¿™æ˜¯ä¸€é“å¾ˆç»å…¸çš„é¢˜ã€‚
ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º nçš„æ•´æ•°æ•°åˆ—ï¼Œè¯·ä½ è®¡ç®—æ•°åˆ—ä¸­çš„é€†åºå¯¹çš„æ•°é‡ã€‚
é€†åºå¯¹çš„å®šä¹‰å¦‚ä¸‹ï¼šå¯¹äºæ•°åˆ—çš„ç¬¬ iä¸ªå’Œç¬¬ jä¸ªå…ƒç´ ï¼Œå¦‚æœæ»¡è¶³ i<jä¸” a[i]>a[j]ï¼Œåˆ™å…¶ä¸ºä¸€ä¸ªé€†åºå¯¹ï¼›å¦åˆ™ä¸æ˜¯ã€‚

è¾“å…¥æ ¼å¼
ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° nï¼Œè¡¨ç¤ºæ•°åˆ—çš„é•¿åº¦ã€‚

ç¬¬äºŒè¡ŒåŒ…å« nä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ•´ä¸ªæ•°åˆ—ã€‚

è¾“å‡ºæ ¼å¼
è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºé€†åºå¯¹çš„ä¸ªæ•°ã€‚

æ•°æ®èŒƒå›´
1â‰¤nâ‰¤100000
æ•°åˆ—ä¸­çš„å…ƒç´ çš„å–å€¼èŒƒå›´ [1,109]

è¾“å…¥æ ·ä¾‹ï¼š
6
2 3 4 5 6 1
è¾“å‡ºæ ·ä¾‹ï¼š
5

# ğŸ”ŠäºŒåˆ†

## ğŸ”³æ•´æ•°çš„äºŒåˆ†
äºŒåˆ†çš„æ ¸å¿ƒæ€æƒ³åœ¨äºå¯¹æ•°ç»„æˆ–è€…ä¸€æ®µèŒƒå›´æ‰¾åˆ°ä¸€ä¸ªåˆç†çš„`åˆ¤æ–­æ¡ä»¶`ï¼Œå¯ä»¥å°†å…¶`åˆ’åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸ`ã€‚
ä¾‹å¦‚ç»™å®šä¸€ä¸ª`æœ‰åº`çš„æ•´æ•°æ•°ç»„ï¼Œæˆ‘ä»¬éœ€è¦å¯»æ‰¾å…¶ä¸­æ˜¯å¦æœ‰4è¿™ä¸ªæ•°å­—ï¼Œé‚£ä¹ˆç»™å®šçš„åˆ¤æ–­æ¡ä»¶å°±å¯ä»¥æ˜¯x>=4æˆ–è€…x<=4.
å…ˆå‡è®¾å–å¾—çš„å€¼ä¸ºmid=ï¼ˆl+r/2ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥å¾—åˆ°ä¸‹å›¾çš„æ¨æ–­ã€‚
æˆ‘ä»¬éœ€è¦å¯»æ‰¾çš„å€¼å°±æ˜¯è“è‰²çš„æœ€å³è¾¹ï¼Œçº¢è‰²çš„æœ€å·¦è¾¹ã€‚
<img src='https://imgbed.link/file/18079'>
åœ¨æ­¤åŸºç¡€ä¸Šä¸æ–­çš„è¿›è¡ŒäºŒåˆ†ï¼Œç¼©å°æ•°ç»„çš„æŸ¥æ‰¾åŒºé—´ã€‚è¿™å°±æ˜¯äºŒåˆ†çš„åŸºæœ¬æ€è·¯ã€‚
ä»¥ä¸‹æ˜¯ç»™å‡ºçš„ä»£ç æ¨¡æ¿ã€‚

```c++
bool check(int x) {/* ... */} // æ£€æŸ¥xæ˜¯å¦æ»¡è¶³æŸç§æ€§è´¨

// åŒºé—´[l, r]è¢«åˆ’åˆ†æˆ[l, mid]å’Œ[mid + 1, r]æ—¶ä½¿ç”¨ï¼š
int bsearch_1(int l, int r)
{
    while (l < r)
    {
        int mid = l + r >> 1;
        if (check(mid)) r = mid;    // check()åˆ¤æ–­midæ˜¯å¦æ»¡è¶³æ€§è´¨
        else l = mid + 1;
    }
    return l;
}
// åŒºé—´[l, r]è¢«åˆ’åˆ†æˆ[l, mid - 1]å’Œ[mid, r]æ—¶ä½¿ç”¨ï¼š
int bsearch_2(int l, int r)
{
    while (l < r)
    {
        int mid = l + r + 1 >> 1;
        if (check(mid)) l = mid;
        else r = mid - 1;
    }
    return l;
}

```
ä»£ç ä¸­ç»™å‡ºçš„ä¸¤ä¸ªäºŒåˆ†æŸ¥æ‰¾ä¹Ÿå°±åˆ†åˆ«å¯¹åº”äº†`è“è‰²ä¸çº¢è‰²`çš„ä¸¤ç§åˆ’åˆ†ã€‚
å½“åŒºé—´è¢«åˆ’åˆ†ä¸ºï¼ˆlï¼Œmid-1ï¼‰ä¸ï¼ˆmidï¼Œrï¼‰æ—¶ï¼Œç”±äºmidå­˜åœ¨å‘ä¸‹å–æ•´çš„æƒ…å†µï¼Œæ‰€ä»¥midå¯èƒ½`ä¼šå–åˆ°l`ï¼Œé€ æˆ`æ­»å¾ªç¯`ï¼Œé‚£ä¹ˆæ­¤æ—¶è§£å†³çš„åŠæ³•å°±æ˜¯å°†`mid+1`ï¼Œå°±å¯ä»¥è§„é¿æ­»å¾ªç¯ã€‚
ä¹Ÿå°±æ˜¯        int mid = l + r + 1 >> 1;

### ğŸ¤¡æ•°çš„èŒƒå›´
ç»™å®šä¸€ä¸ªæŒ‰ç…§å‡åºæ’åˆ—çš„é•¿åº¦ä¸º nçš„æ•´æ•°æ•°ç»„ï¼Œä»¥åŠ q ä¸ªæŸ¥è¯¢ã€‚
å¯¹äºæ¯ä¸ªæŸ¥è¯¢ï¼Œè¿”å›ä¸€ä¸ªå…ƒç´  kçš„èµ·å§‹ä½ç½®å’Œç»ˆæ­¢ä½ç½®ï¼ˆä½ç½®ä» 0å¼€å§‹è®¡æ•°ï¼‰ã€‚
å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨è¯¥å…ƒç´ ï¼Œåˆ™è¿”å› -1 -1ã€‚
è¾“å…¥æ ¼å¼
ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° nå’Œ qï¼Œè¡¨ç¤ºæ•°ç»„é•¿åº¦å’Œè¯¢é—®ä¸ªæ•°ã€‚

ç¬¬äºŒè¡ŒåŒ…å« nä¸ªæ•´æ•°ï¼ˆå‡åœ¨ 1âˆ¼10000èŒƒå›´å†…ï¼‰ï¼Œè¡¨ç¤ºå®Œæ•´æ•°ç»„ã€‚
æ¥ä¸‹æ¥ qè¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° kï¼Œè¡¨ç¤ºä¸€ä¸ªè¯¢é—®å…ƒç´ ã€‚

è¾“å‡ºæ ¼å¼
å…± qè¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ‰€æ±‚å…ƒç´ çš„èµ·å§‹ä½ç½®å’Œç»ˆæ­¢ä½ç½®ã€‚

å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨è¯¥å…ƒç´ ï¼Œåˆ™è¿”å› -1 -1ã€‚

æ•°æ®èŒƒå›´
1â‰¤nâ‰¤100000

1â‰¤qâ‰¤10000

1â‰¤kâ‰¤10000
è¾“å…¥æ ·ä¾‹ï¼š
6 3
1 2 2 3 3 4
3
4
5
è¾“å‡ºæ ·ä¾‹ï¼š
3 4
5 5
-1 -1

æœ¬é¢˜çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯å¯»æ‰¾`ç‰¹å®šæ•°å­—çš„èµ·å§‹ä¸ç»ˆæ­¢åæ ‡`ï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ©ç”¨åˆ°ä¸Šé¢è®²çš„ä¸¤ç§åŒºé—´äº†ï¼Œè“è‰²çš„å¯ä»¥æ‰¾åˆ°ç»ˆæ­¢ï¼Œçº¢è‰²çš„å¯ä»¥æ‰¾åˆ°èµ·å§‹ã€‚ä¸è¦å°†äºŒåˆ†åªæ˜¯å±€é™äºå¯»æ‰¾ä¸€ä¸ªå€¼ï¼Œä½ å¯ä»¥åˆ©ç”¨checkå‡½æ•°å¯»æ‰¾åˆ°æ»¡è¶³æŸä¸ªæ¡ä»¶çš„`ä¸´ç•Œç‚¹`ã€‚
ä»£ç å¦‚ä¸‹ï¼š

```c
#include<stdio.h>
int check1(int *arr,int num,int q){
    if(arr[num]>=q)
    return 1;
    else
    return 0;
}
int check2(int* arr,int num,int q){
    if(arr[num]<=q)
    return 1;
    else
    return 0;
}
int binerysearch1(int q,int* arr,int l,int r){
   
    while(l<r){
    int mid=(l+r>>1);
    if(check1(arr,mid,q)) r=mid;
    else l=mid+1;}
    if(arr[l]==q)
     return l;
     else
     return -1;
}
int binerysearch2(int q,int*arr,int l,int r){
    

   while(l<r){
    int mid=(l+r+1>>1);
    if(check2(arr,mid,q)) l=mid;
    else r=mid-1;}
    if(arr[l]==q)
      return l;
    else
      return -1;
}
```

## ğŸ˜æµ®ç‚¹æ•°äºŒåˆ†
æµ®ç‚¹æ•°çš„äºŒåˆ†ç›¸è¾ƒä¹‹ä¸‹å°±è¦ç®€å•å¾ˆå¤šäº†ã€‚
åªè¦rä¸lçš„å·®è·`è¶³å¤Ÿå°`ï¼Œå°±å¯ä»¥è®¤ä¸ºè¿™æ˜¯æˆ‘ä»¬æƒ³è¦çš„å€¼äº†ã€‚
å…¶æ¨¡æ¿å¦‚ä¸‹ï¼š
```c++
bool check(double x) {/* ... */} // æ£€æŸ¥xæ˜¯å¦æ»¡è¶³æŸç§æ€§è´¨

double bsearch_3(double l, double r)
{
    const double eps = 1e-6;   // eps è¡¨ç¤ºç²¾åº¦ï¼Œå–å†³äºé¢˜ç›®å¯¹ç²¾åº¦çš„è¦æ±‚
    while (r - l > eps)
    {
        double mid = (l + r) / 2;
        if (check(mid)) r = mid;
        else l = mid;
    }
    return l;
}
```
æµ®ç‚¹æ•°çš„äºŒåˆ†å¯ä»¥ç”¨æ¥æ±‚ä¸€ä¸ªæ•°çš„`ä¸‰æ¬¡æ–¹æ ¹`ï¼Œè®¡ç®—æœºå¯¹äºæµ®ç‚¹æ•°çš„å­˜å‚¨æœ¬æ¥å°±ä¸ä¼šç‰¹åˆ«ç²¾ç¡®ï¼Œæ‰€ä»¥åªéœ€è¦å°†å…¶è¯¯å·®æ§åˆ¶åœ¨1e-6å°±å¯ä»¥å•¦ã€‚
ç»™å‡ºä¸€ç§å†™æ³•ï¼š
```c
int check(double num,double mid){
    if(mid*mid*mid>=num){
        return 1;
    }else
    return 0;
}
void binerysearch(double num,double a,double b){
     double eps=1e-6;
     double mid=0.0;
     while(b-a>=eps){
          mid=(a+b)/2;
         if(check(num,mid)) b=mid;
         else a=mid;
     }
     printf("%.6lf",mid);
}
int main(){
    double num=0;
    scanf("%lf",&num);
    binerysearch(num ,-10000.00,10000.00);
}
```
